<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>myMemoPad</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
</head>
<body>
<header>
<h1>トイレ時間記録</h1>
</header>
    <div></div>
    <ul>
        <li><a href="" class="oshikonum"><img id="oshikko"src="img/おしっこ.jpg" alt="おしっこ"></a></li>
        <li><img id ="wash" style="display:none"  src="img/トレイ流す.jpg" alt=""></li>
        <li><a href="" class="unchinum"><img id="unchi" src="img/Emoji_u1f4a9.svg.png" alt="うんち"></a></li>
    </ul>
    <!-- <ul>
        <li><span id ="counter">0</span></li>
        <li id="countU">0</li>
    </ul> -->
<main>
    <ul>
        <li id ="save">Save</li>
        <li id = "clear">Clear</li>
    </ul>
    <input="text" id ="key" id="key2">
    <textarea id = "memo"></textarea>

</main>
<table id="list">
<!-- ここに追加データが挿入される -->
</table>
<script>
 

//1.Save クリックイベント

 
$("#oshikko").on("click",function(){ 
    let key = $("#key").val();
    key = "おしっこ";  
    let memo = $("#memo").val();
    memo = new Date();
    var ye = memo.getFullYear();
    var mo = ("0" + (memo.getMonth()+1)).slice(-2);
    var da = ("0" + memo.getDate()).slice(-2);
    var ho = ("0" + memo.getHours()).slice(-2);
    var mi = ("0" + memo.getMinutes()).slice(-2); 
    // ローカルに入れた値を取得する
    memo = ye +"年" + mo  + "月" + da + "日" + ho +"時" + mi+ "分";
    console.log(key,"データが取れているかチェック");
    console.log(memo,"データが取れているかチェック");
    // if(key === ""){
    //     alert("文字入れて");
    // }
    localStorage.setItem(memo,key);
    

    const html =`   
    <tr>
        <th>${key}</th>
        <td>${memo}</td>
    </tr>
    
    `;
    $("#list").append(html); 

    var size =" "+ $('th').length + "回目";

    alert(size);
});



$("#clear").on("click",function(){
    localStorage.clear();
    $("#list").empty();
});

$("#unchi").on("click",function(){
    let key = $("#key").val();
    key = "うんち";
    let memo = $("#memo").val();
    memo = new Date();
    var ye = memo.getFullYear();
    var mo = ("0" + (memo.getMonth()+1)).slice(-2);
    var da = ("0" + memo.getDate()).slice(-2);
    var ho = ("0" + memo.getHours()).slice(-2);
    var mi = ("0" + memo.getMinutes()).slice(-2); 
    // ローカルに入れた値を取得する
    memo = ye +"年" + mo  + "月" + da + "日" + ho +"時" + mi+ "分";
    console.log(memo,"データが取れているかチェック")
    console.log(memo,"データが取れているかチェック")
    // if(key === ""){
    //     alert("文字入れて");
    // }
    localStorage.setItem(memo,key);

    const html =`   
    <tr>
        <th>${key}</th>
        <td>${memo}</td>
    </tr>
    
    `;
    $("#list").append(html);
    var size =" "+ $('th').length + "回目";
    alert(size);    
    $("#clear").on("click",function(){
    localStorage.clear();
    $("#list").empty();
    })
});

$("#wash").show(1000);
$("#wash").delay(2000);
$("#wash").fadeOut(1000); 
// $("xx").val()はinputタグしか使えない　input text email textarea tel
// keyが同じだと更新（値箇所が変わるのみ）される、Keyが変わればNEWのデータとして追加される



//2.clear クリックイベント

// let thisCount = $("#count").html();
//         thisCount = Number(thisCount);
//         thisCount = thisCount + 1;  



//3.ページ読み込み：保存データ取得表示


for( let i = 0 ; i < localStorage.length ; i++){
    const key = localStorage.key(i);
    const value = localStorage.getItem(key);
    const count = " "+ $('th').length + "回目";

    const html =`
    <tr>
        <th>${key}</th>
        <td>${value}</td>
        <td>${count}</td>
    </tr>
    `
    // 画面上に埋め込む
    $("#list").append(html)
}
// 登録したものを残しておける。リロードしても残っている保存する、表示される仕組み

// location.reload() リロードを強制
// 画像を文字変換にしたベース64を使えばOK

</script>
<footer><small>G's</small></footer>
</body>
</html>